æˆ‘ä»¬éœ€è¦å°†æ–‡æ¡ˆ**â€œåˆ†ä¸»é¢˜å®šåˆ¶åŒ–â€**ã€‚ä¸åŒçš®è‚¤çš„ç”¨æˆ·å¿ƒå¢ƒä¸åŒï¼Œæ–‡æ¡ˆé£æ ¼ä¹Ÿåº”æˆªç„¶ä¸åŒã€‚

ä»¥ä¸‹æ˜¯å®Œæ•´çš„**æ–‡æ¡ˆæ‰©å……**ä¸**å¡ç‰‡é‡è®¾è®¡**æ–¹æ¡ˆã€‚

### 1. âœï¸ çµé­‚æ³¨å…¥ï¼šåˆ†ä¸»é¢˜å›½é™…åŒ–æ–‡æ¡ˆåº“

æˆ‘ä»¬å°†ä¸º 4 ç§çš®è‚¤åˆ†åˆ«è®¾è®¡ 6 ç»„ï¼ˆ3 Yes / 3 Noï¼‰ä¸“å±æ–‡æ¡ˆï¼Œæ¶µç›–**å“²å­¦ï¼ˆVintageï¼‰ã€æ²»æ„ˆï¼ˆHealingï¼‰ã€ç¡¬æ ¸ï¼ˆCyberï¼‰ã€ç„å­¦ï¼ˆWishï¼‰**å››ç§é£æ ¼ã€‚

**è¯·æ›´æ–° `lib/l10n/app_zh.arb` (ä¸­æ–‡ç‰ˆ)**

JSON

```
{
  "appTitle": "å†³å®šç¬é—´",
  "tapToDecide": "ç‚¹å‡»åšå†³å®š",
  "pokeGently": "æˆ³æˆ³æˆ‘å‘€ ~",
  "resultYes": "Yes",
  "resultNo": "No",
  "recordSaved": "è®°å½•å·²ä¿å­˜",
  
  "flipMomentLogo": "FLIP MOMENT",
  "resultCardTitle": "ç­”æ¡ˆ",
  "shareButton": "åˆ†äº«å¥½è¿",
  "closeButton": "æ”¶ä¸‹",
  "luckyIndex": "è¿åŠ¿æŒ‡æ•°",
  "luckyColor": "å¹¸è¿è‰²",

  "@_VINTAGE_COPY": {},
  "vinYes1": "ç¡®å‡¿æ— ç–‘", "vinYesSub1": "å‘½è¿å·²å†™ä¸‹æ³¨è„šã€‚",
  "vinYes2": "è¡ŒåŠ¨ä¹‹æ—¶", "vinYesSub2": "è¿™ç§æ„Ÿè§‰åä¸ºç›´è§‰ã€‚",
  "vinYes3": "å½“ç„¶",     "vinYesSub3": "å°±åƒæ—¥å‡æœˆè½èˆ¬è‡ªç„¶ã€‚",
  "vinNo1": "ç¨å®‰å‹¿èº", "vinNoSub1": "æ—¶é—´ä¼šç»™å‡ºæ›´å¥½çš„ç­”æ¡ˆã€‚",
  "vinNo2": "æ­¢æ­¥",     "vinNoSub2": "æœ‰äº›è·¯ä¸é€šä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤ã€‚",
  "vinNo3": "æœªåˆ°æ—¶å€™", "vinNoSub3": "ç­‰å¾…æ˜¯æ™ºæ…§çš„ä½“ç°ã€‚",

  "@_HEALING_COPY": {},
  "heaYes1": "å¥½è€¶ï¼",   "heaYesSub1": "å»åšè®©è‡ªå·±å¼€å¿ƒçš„äº‹å§ï¼",
  "heaYes2": "å»å†²é¸­",   "heaYesSub2": "ä»Šå¤©å…¨ä¸–ç•Œéƒ½åçˆ±ä½ ã€‚",
  "heaYes3": "æ²¡é—®é¢˜",   "heaYesSub3": "ç›¸ä¿¡è‡ªå·±ï¼Œä½ è¶…æ£’çš„ã€‚",
  "heaNo1": "ä¼‘æ¯ä¸‹",   "heaNoSub1": "æŠ±æŠ±ä½ ï¼Œä¸å¼€å¿ƒå°±å…ˆä¸åšã€‚",
  "heaNo2": "æ…¢æ…¢æ¥",   "heaNoSub2": "ä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„å˜›ã€‚",
  "heaNo3": "å†ç­‰ç­‰",   "heaNoSub3": "ä¹Ÿè®¸ä¼šæœ‰è½¬æœºå“¦ã€‚",

  "@_CYBER_COPY": {},
  "cybYes1": "æƒé™æˆäºˆ", "cybYesSub1": "ROOT_ACCESS_GRANTED",
  "cybYes2": "ä¿¡å·æ¥é€š", "cybYesSub2": "UPLINK_ESTABLISHED",
  "cybYes3": "æ‰§è¡Œ",     "cybYesSub3": "EXECUTE_IMMEDIATELY",
  "cybNo1": "è¿æ¥è¢«æ‹’", "cybNoSub1": "CONNECTION_REFUSED",
  "cybNo2": "ç³»ç»Ÿé˜»æ–­", "cybNoSub2": "FIREWALL_BLOCKING",
  "cybNo3": "æ•°æ®ä¸è¶³", "cybNoSub3": "INSUFFICIENT_DATA",

  "@_WISH_COPY": {},
  "wisYes1": "æ˜Ÿè¾°å›åº”", "wisYesSub1": "é“¶æ²³ç³»å‘ä½ çœ¨äº†çœ¨çœ¼ã€‚",
  "wisYes2": "ç¥è¿¹",     "wisYesSub2": "æ„¿æœ›æ­£åœ¨æ˜¾åŒ–ä¸­ã€‚",
  "wisYes3": "å¦‚æ„¿",     "wisYesSub3": "æ‰€å¿µçš†æ˜Ÿæ²³ã€‚",
  "wisNo1": "è¿·é›¾",     "wisNoSub1": "å‰è·¯æš‚æœªæ¸…æ™°ã€‚",
  "wisNo2": "é™é»˜",     "wisNoSub2": "å®‡å®™è®©ä½ å…ˆçˆ±è‡ªå·±ã€‚",
  "wisNo3": "æš‚ç¼“",     "wisNoSub3": "æ—¶æœºæœªåˆ°ï¼Œé™å¾…èŠ±å¼€ã€‚",

  "meTitle": "æˆ‘çš„",
  "identityTitle": "Lv.5 å‘½è¿é¢†èˆªå‘˜",
  "identityDesc": "æ”¶é›†æ¯ä¸€ä¸ªå†³å®šçš„ç¬é—´ã€‚",
  "statsFlips": "æ¬¡å†³ç­–",
  "statsStreak": "æ—¥è¿ç»­",
  "statsHappy": "å¿«ä¹ç‡",
  "sectionFeatures": "æ ¸å¿ƒåŠŸèƒ½",
  "featureThemes": "ä¸ªæ€§çš®è‚¤",
  "featureLog": "å†³ç­–æ‰‹è´¦",
  "featureLogSub": "å›é¡¾ä½ çš„å‘½è¿æ—¶åˆ»",
  "featureWidgets": "æ¡Œé¢ç»„ä»¶",
  "featureWidgetsSub": "åœ¨æ¡Œé¢è£…é¥°å¥½è¿",
  "sectionGeneral": "é€šç”¨è®¾ç½®",
  "settingGeneral": "è®¾ç½®ä¸æ›´å¤š",
  "settingHelp": "å¸®åŠ©ä¸åé¦ˆ",
  "settingAbout": "å…³äºå†³å®šç¬é—´",
  "settingSoundEffects": "éŸ³æ•ˆ",
  "settingHapticFeedback": "éœ‡åŠ¨åé¦ˆ",
  "footerVersion": "ç¬åˆ» v1.0.0",
  "themeVintage": "å¤å¤æœºæ¢°",
  "themeHealing": "æ²»æ„ˆå›¢å­",
  "themeCyber": "èµ›åšæœ‹å…‹",
  "themeWish": "è®¸æ„¿æ± ",
  "skinDescVintage": "ç»å…¸æœºæ¢°ç¾å­¦ä¸èƒ¶ç‰‡è´¨æ„Ÿã€‚",
  "skinDescHealing": "è½¯èŒå›¢å­å¸¦æ¥çš„æ²»æ„ˆæ—¶å…‰ã€‚",
  "skinDescCyber": "è¿æ¥æœªæ¥ä¿¡å·ï¼Œè§£ç ä½ çš„è¿åŠ¿ã€‚",
  "skinDescWish": "å‘é“¶æ²³æŠ•æ·ä¸€æšè®¸æ„¿å¸ã€‚",
  "galleryTitle": "ä¸»é¢˜ç”»å»Š",
  "statusApplied": "å½“å‰ä½¿ç”¨ä¸­",
  "actionApply": "åº”ç”¨ä¸»é¢˜",
  "actionUnlock": "è§£é”ä¼šå‘˜æƒç›Š",
  "actionComingSoon": "å¼€å‘ä¸­",
  "vipBadge": "VIP",
  "historyTitle": "å†³ç­–æ‰‹è´¦",
  "historyEmpty": "è¿˜æ²¡æœ‰æ”¶é›†åˆ°ç¬é—´",
  "historyEmptyDesc": "ä½ çš„å†³ç­–å†å²å°†åœ¨è¿™é‡Œæ˜¾ç¤º",
  "today": "ä»Šå¤©",
  "yesterday": "æ˜¨å¤©",
  "levelUpTitle": "LEVEL UP!",
  "awesomeButton": "å¤ªæ£’äº†ï¼",
  "expProgress": "XP ç»éªŒå€¼",
  "titleDrifter": "æ¼‚æµç“¶",
  "titleLightSeeker": "å¯»å…‰è€…", 
  "titleMomentCollector": "æ”¶è—å®¶",
  "titleStarReader": "å æ˜Ÿå¸ˆ",
  "titleFateArchitect": "å‘½è¿ä¸»ç†äºº"
}
```

**è¯·åŒæ­¥æ›´æ–° `lib/l10n/app_en.arb` (è‹±æ–‡ç‰ˆ)**

JSON

```
{
  "appTitle": "Flip Moment",
  "tapToDecide": "TAP TO DECIDE",
  "pokeGently": "Poke me gently ~",
  "resultYes": "YES",
  "resultNo": "NO",
  "recordSaved": "Record saved",
  
  "flipMomentLogo": "FLIP MOMENT",
  "resultCardTitle": "The Answer",
  "shareButton": "SHARE LUCK",
  "closeButton": "KEEP IT",
  "luckyIndex": "LUCK INDEX",
  "luckyColor": "LUCKY COLOR",

  "@_VINTAGE_COPY": {},
  "vinYes1": "UNDOUBTEDLY", "vinYesSub1": "Destiny has spoken.",
  "vinYes2": "PROCEED",     "vinYesSub2": "Intuition is your guide.",
  "vinYes3": "CERTAINLY",   "vinYesSub3": "As natural as sunrise.",
  "vinNo1": "PATIENCE",     "vinNoSub1": "Time holds better answers.",
  "vinNo2": "HALT",         "vinNoSub2": "A closed door is protection.",
  "vinNo3": "NOT YET",      "vinNoSub3": "Waiting is wisdom.",

  "@_HEALING_COPY": {},
  "heaYes1": "YAY!",        "heaYesSub1": "Do what makes you happy!",
  "heaYes2": "GO FOR IT",   "heaYesSub2": "The world loves you today.",
  "heaYes3": "SURE THING",  "heaYesSub3": "Trust yourself, you got this.",
  "heaNo1": "TAKE A NAP",   "heaNoSub1": "Hugs! No need to force it.",
  "heaNo2": "SLOW DOWN",    "heaNoSub2": "It's not a big deal anyway.",
  "heaNo3": "WAIT A BIT",   "heaNoSub3": "Something better is coming.",

  "@_CYBER_COPY": {},
  "cybYes1": "GRANTED",     "cybYesSub1": "ROOT_ACCESS_GRANTED",
  "cybYes2": "LINKED",      "cybYesSub2": "UPLINK_ESTABLISHED",
  "cybYes3": "EXECUTE",     "cybYesSub3": "EXECUTE_IMMEDIATELY",
  "cybNo1": "DENIED",       "cybNoSub1": "CONNECTION_REFUSED",
  "cybNo2": "BLOCKED",      "cybNoSub2": "FIREWALL_BLOCKING",
  "cybNo3": "NO_DATA",      "cybNoSub3": "INSUFFICIENT_DATA",

  "@_WISH_COPY": {},
  "wisYes1": "STARDUST",    "wisYesSub1": "The galaxy winks at you.",
  "wisYes2": "MIRACLE",     "wisYesSub2": "Manifestation in progress.",
  "wisYes3": "GRANTED",     "wisYesSub3": "As you wish.",
  "wisNo1": "FOGGY",        "wisNoSub1": " The path is not clear yet.",
  "wisNo2": "SILENCE",      "wisNoSub2": "Love yourself first.",
  "wisNo3": "DELAY",        "wisNoSub3": "Wait for the bloom.",

  "meTitle": "Me",
  "identityTitle": "Lv.5 Fate Navigator",
  "identityDesc": "Collecting moments, one flip at a time.",
  "statsFlips": "Flips",
  "statsStreak": "Streak",
  "statsHappy": "Happy",
  "sectionFeatures": "CORE FEATURES",
  "featureThemes": "Theme Skins",
  "featureLog": "Decision Log",
  "featureLogSub": "Review your moments",
  "featureWidgets": "Home Widgets",
  "featureWidgetsSub": "Setup desktop shortcuts",
  "sectionGeneral": "GENERAL",
  "settingGeneral": "Settings & More",
  "settingHelp": "Help & Feedback",
  "settingAbout": "About Flip Moment",
  "settingSoundEffects": "Sound Effects",
  "settingHapticFeedback": "Haptic Feedback",
  "footerVersion": "Flip Moment v1.0.0",
  "themeVintage": "Vintage",
  "themeHealing": "Healing",
  "themeCyber": "Cyber",
  "themeWish": "Wish",
  "skinDescVintage": "Classic mechanics & aesthetics.",
  "skinDescHealing": "Soft, cute, and stress-free.",
  "skinDescCyber": "Decode your destiny from the future.",
  "skinDescWish": "Make a wish into the galaxy.",
  "galleryTitle": "Theme Gallery",
  "statusApplied": "CURRENTLY APPLIED",
  "actionApply": "APPLY THEME",
  "actionUnlock": "UNLOCK PREMIUM",
  "actionComingSoon": "COMING SOON",
  "vipBadge": "VIP",
  "historyTitle": "Decision Log",
  "historyEmpty": "No moments collected yet",
  "historyEmptyDesc": "Your decision history will appear here",
  "today": "Today",
  "yesterday": "Yesterday",
  "levelUpTitle": "LEVEL UP!",
  "awesomeButton": "Awesome!",
  "expProgress": "XP",
  "titleDrifter": "Drifter",
  "titleLightSeeker": "Light Seeker",
  "titleMomentCollector": "Moment Collector", 
  "titleStarReader": "Star Reader",
  "titleFateArchitect": "Fate Architect"
}
```

------

### 2. ğŸ² ç¬¬äºŒæ­¥ï¼šå‡çº§éšæœºæ–‡æ¡ˆå¼•æ“

æˆ‘ä»¬éœ€è¦è®© `FortuneGenerator` èƒ½å¤Ÿæ„ŸçŸ¥å½“å‰çš„ `SkinMode`ï¼Œä»è€Œåå‡ºä¸åŒé£æ ¼çš„æ–‡æ¡ˆã€‚

**ä¿®æ”¹æ–‡ä»¶ï¼š`lib/features/decision/presentation/widgets/result_card.dart`** (å†…å«ç”Ÿæˆå™¨ç±»)

Dart

```
// æ”¾åœ¨ ResultCard æ–‡ä»¶çš„åº•éƒ¨æˆ–å•ç‹¬æ–‡ä»¶
class FortuneData {
  final String mainTitle;
  final String subTitle;
  final int stars;
  final Color luckyColor;
  final String luckyColorName;

  FortuneData(this.mainTitle, this.subTitle, this.stars, this.luckyColor, this.luckyColorName);
}

class FortuneGenerator {
  static FortuneData generate(BuildContext context, bool isYes, SkinMode mode) {
    final loc = AppLocalizations.of(context)!;
    final random = math.Random();
    
    List<String> titles;
    List<String> subs;

    // 1. æ ¹æ®çš®è‚¤æ¨¡å¼å’Œç»“æœï¼Œä»æœ¬åœ°åŒ–èµ„æºä¸­æå–æ–‡æ¡ˆæ± 
    switch (mode) {
      case SkinMode.vintage:
        titles = isYes 
            ? [loc.vinYes1, loc.vinYes2, loc.vinYes3] 
            : [loc.vinNo1, loc.vinNo2, loc.vinNo3];
        subs = isYes
            ? [loc.vinYesSub1, loc.vinYesSub2, loc.vinYesSub3]
            : [loc.vinNoSub1, loc.vinNoSub2, loc.vinNoSub3];
        break;
      case SkinMode.healing:
        titles = isYes 
            ? [loc.heaYes1, loc.heaYes2, loc.heaYes3] 
            : [loc.heaNo1, loc.heaNo2, loc.heaNo3];
        subs = isYes
            ? [loc.heaYesSub1, loc.heaYesSub2, loc.heaYesSub3]
            : [loc.heaNoSub1, loc.heaNoSub2, loc.heaNoSub3];
        break;
      case SkinMode.cyber:
        titles = isYes 
            ? [loc.cybYes1, loc.cybYes2, loc.cybYes3] 
            : [loc.cybNo1, loc.cybNo2, loc.cybNo3];
        subs = isYes
            ? [loc.cybYesSub1, loc.cybYesSub2, loc.cybYesSub3]
            : [loc.cybNoSub1, loc.cybNoSub2, loc.cybNoSub3];
        break;
      case SkinMode.wish:
        titles = isYes 
            ? [loc.wisYes1, loc.wisYes2, loc.wisYes3] 
            : [loc.wisNo1, loc.wisNo2, loc.wisNo3];
        subs = isYes
            ? [loc.wisYesSub1, loc.wisYesSub2, loc.wisYesSub3]
            : [loc.wisNoSub1, loc.wisNoSub2, loc.wisNoSub3];
        break;
    }

    // 2. éšæœºæŠ½å–æ–‡æ¡ˆ
    final index = random.nextInt(titles.length);
    
    // 3. éšæœºæ˜Ÿçº§ (3-5)
    final stars = 3 + random.nextInt(3);

    // 4. éšæœºå¹¸è¿è‰² (å¢åŠ ç„å­¦æ„Ÿ)
    final colors = [
      (const Color(0xFFE57373), "Coral Red"),
      (const Color(0xFF81C784), "Mint Green"),
      (const Color(0xFF64B5F6), "Sky Blue"),
      (const Color(0xFFFFD54F), "Sunshine"),
      (const Color(0xFF9575CD), "Lavender"),
    ];
    final colorData = colors[random.nextInt(colors.length)];

    return FortuneData(titles[index], subs[index], stars, colorData.$1, colorData.$2);
  }
}
```

------

### 3. ğŸ¨ ç¬¬ä¸‰æ­¥ï¼šé‡å†™ ResultCard UI

ä¸ºäº†è®©å¡ç‰‡æ›´â€œå°çº¢ä¹¦â€ï¼Œæˆ‘ä»¬éœ€è¦ï¼š

1. **å¤šæ€å¡ç‰‡å®¹å™¨**ï¼šæ ¹æ®çš®è‚¤ä¸åŒï¼Œå¡ç‰‡çš„å½¢çŠ¶ï¼ˆåœ†è§’/åˆ‡è§’/æ’•è¾¹ï¼‰å’Œæè´¨ï¼ˆçº¸è´¨/å…¨æ¯/ç£¨ç ‚ï¼‰å®Œå…¨ä¸åŒã€‚
2. **è£…é¥°æ€§å…ƒç´ **ï¼šåŠ å…¥æ¡å½¢ç ã€å™ªç‚¹ã€å…¨æ¯è´´çº¸æ•ˆæœã€‚
3. **åº•éƒ¨æ“ä½œæ **ï¼šæ›´åŠ æç®€ï¼Œçªå‡ºâ€œåˆ†äº«â€çš„æ¬²æœ›ã€‚

**å®Œæ•´ä»£ç æ›¿æ¢ï¼š`lib/features/decision/presentation/widgets/result_card.dart`**

Dart

```
import 'dart:math' as math;
import 'dart:ui';
import 'package:flutter/material.dart';
import 'package:google_fonts/google_fonts.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../../core/skin_engine/skin_protocol.dart';
import '../../../../l10n/app_localizations.dart';

class ResultCard extends StatefulWidget {
  final AppSkin skin;
  final String result;
  final VoidCallback onClose;

  const ResultCard({
    super.key,
    required this.skin,
    required this.result,
    required this.onClose,
  });

  @override
  State<ResultCard> createState() => _ResultCardState();
}

class _ResultCardState extends State<ResultCard> {
  late FortuneData _fortune;

  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    // ä¼ å…¥ SkinMode å¯ç”¨å¤šä¸»é¢˜æ–‡æ¡ˆ
    _fortune = FortuneGenerator.generate(
      context, 
      widget.result == "YES",
      widget.skin.mode,
    );
  }

  @override
  Widget build(BuildContext context) {
    final loc = AppLocalizations.of(context)!;
    
    // åŠ¨æ€è®¡ç®—å¡ç‰‡åº•è‰² (æ ¹æ®ç»“æœå’Œçš®è‚¤)
    final bool isYes = widget.result == "YES";
    
    return Material(
      color: Colors.transparent,
      child: Stack(
        alignment: Alignment.center,
        children: [
          // 1. å…¨å±æ¨¡ç³ŠèƒŒæ™¯ (Frost Glass)
          Positioned.fill(
            child: BackdropFilter(
              filter: ImageFilter.blur(sigmaX: 20, sigmaY: 20),
              child: Container(
                color: Colors.black.withOpacity(0.6),
              ),
            ).animate().fadeIn(duration: 400.ms),
          ),

          // 2. æ ¸å¿ƒå¡ç‰‡åŒºåŸŸ
          Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              // RepaintBoundary ç”¨äºå°†æ¥åšæˆªå›¾åˆ†äº«
              RepaintBoundary(
                child: _buildAdaptiveCard(loc, isYes),
              )
              .animate()
              .scale(
                begin: const Offset(0.9, 0.9), 
                end: const Offset(1.0, 1.0),
                duration: 600.ms,
                curve: Curves.easeOutQuart
              )
              .fadeIn(duration: 300.ms)
              .shimmer(delay: 600.ms, duration: 1200.ms, color: Colors.white.withOpacity(0.1)), // æ‰«å…‰æ•ˆæœ

              const SizedBox(height: 40),

              // 3. æç®€æ“ä½œæ 
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  _buildActionButton(
                    icon: Icons.ios_share,
                    label: loc.shareButton, // "åˆ†äº«å¥½è¿"
                    onTap: () {
                      ScaffoldMessenger.of(context).showSnackBar(
                        SnackBar(content: Text("${loc.shareButton}... (Saving)")),
                      );
                    },
                    isPrimary: true, // å¼ºè°ƒåˆ†äº«
                    skin: widget.skin,
                  ),
                  const SizedBox(width: 24),
                  _buildActionButton(
                    icon: Icons.close_rounded,
                    label: loc.closeButton, // "æ”¶ä¸‹"
                    onTap: widget.onClose,
                    isPrimary: false,
                    skin: widget.skin,
                  ),
                ],
              )
              .animate()
              .moveY(begin: 60, end: 0, delay: 200.ms, duration: 500.ms)
              .fadeIn(),
            ],
          ),
        ],
      ),
    );
  }

  // ğŸ­ å¤šæ€å¡ç‰‡å·¥å‚
  Widget _buildAdaptiveCard(AppLocalizations loc, bool isYes) {
    switch (widget.skin.mode) {
      case SkinMode.vintage:
        return _buildVintageTicket(loc, isYes);
      case SkinMode.healing:
        return _buildHealingNote(loc, isYes);
      case SkinMode.cyber:
        return _buildCyberDataCard(loc, isYes);
      case SkinMode.wish:
        return _buildTarotCard(loc, isYes);
    }
  }

  // ğŸï¸ æ ·å¼ A: å¤å¤ç¥¨æ ¹ (Vintage)
  Widget _buildVintageTicket(AppLocalizations loc, bool isYes) {
    final screenWidth = MediaQuery.of(context).size.width;
    final cardWidth = screenWidth * 0.82;
    final themeColor = isYes ? const Color(0xFF2E7D32) : const Color(0xFF8F3B35);

    return Container(
      width: cardWidth,
      decoration: BoxDecoration(
        color: const Color(0xFFF2EFE5), // ç±³é»„çº¸å¼ 
        borderRadius: BorderRadius.circular(4),
        boxShadow: [BoxShadow(color: Colors.black45, blurRadius: 30, offset: const Offset(0, 15))],
      ),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          // é¡¶éƒ¨è£…é¥°çº¿
          Container(
            height: 8,
            decoration: BoxDecoration(
              color: themeColor,
              borderRadius: const BorderRadius.vertical(top: Radius.circular(4)),
            ),
          ),
          
          Padding(
            padding: const EdgeInsets.all(24),
            child: Column(
              children: [
                // ç»“æœå¤§å­— (Playfair)
                Text(
                  _fortune.mainTitle.toUpperCase(),
                  textAlign: TextAlign.center,
                  style: GoogleFonts.playfairDisplay(
                    fontSize: 42,
                    height: 1.0,
                    fontWeight: FontWeight.w900,
                    color: const Color(0xFF1A1C1E),
                    letterSpacing: 1.5,
                  ),
                ),
                const SizedBox(height: 12),
                Container(width: 40, height: 2, color: themeColor), // åˆ†å‰²çº¿
                const SizedBox(height: 16),
                // æè¿°æ–‡å­— (Typewriter style)
                Text(
                  _fortune.subTitle,
                  textAlign: TextAlign.center,
                  style: GoogleFonts.courierPrime(
                    fontSize: 14,
                    color: Colors.grey[800],
                    height: 1.5,
                  ),
                ),
                const SizedBox(height: 30),
                
                // åº•éƒ¨æ•°æ®åŒº
                Row(
                  mainAxisAlignment: MainAxisAlignment.spaceBetween,
                  children: [
                    _buildVintageStamp(loc),
                    Column(
                      crossAxisAlignment: CrossAxisAlignment.end,
                      children: [
                        Text(
                          "NO.${DateTime.now().millisecondsSinceEpoch.toString().substring(8)}",
                          style: GoogleFonts.ocrAre(fontSize: 10, color: Colors.grey[500]),
                        ),
                        const SizedBox(height: 4),
                        // æ¨¡æ‹Ÿæ¡å½¢ç 
                        Container(height: 12, width: 60, color: Colors.black87), 
                      ],
                    )
                  ],
                )
              ],
            ),
          ),
          
          // åº•éƒ¨æ’•çº¸æ•ˆæœ (ç”¨è™šçº¿æ¨¡æ‹Ÿ)
          CustomPaint(
            size: Size(cardWidth, 12),
            painter: _DashedLinePainter(color: Colors.grey[400]!),
          ),
          const SizedBox(height: 16),
        ],
      ),
    );
  }

  // ğŸ¡ æ ·å¼ B: æ²»æ„ˆä¾¿ç­¾ (Healing)
  Widget _buildHealingNote(AppLocalizations loc, bool isYes) {
    final screenWidth = MediaQuery.of(context).size.width;
    
    return Transform.rotate(
      angle: 0.03, // å¾®å¾®å€¾æ–œï¼Œåƒéšæ‰‹è´´çš„ä¾¿ç­¾
      child: Container(
        width: screenWidth * 0.75,
        padding: const EdgeInsets.all(24),
        decoration: BoxDecoration(
          color: Colors.white,
          borderRadius: BorderRadius.circular(24),
          boxShadow: [
            BoxShadow(color: widget.skin.primaryAccent.withOpacity(0.2), blurRadius: 20, spreadRadius: 5)
          ],
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            // è´´çº¸è£…é¥° (Emoji)
            Text(
              isYes ? "ğŸ‰" : "ğŸµ",
              style: const TextStyle(fontSize: 60),
            ).animate().scale(curve: Curves.elasticOut, duration: 800.ms),
            
            const SizedBox(height: 20),
            
            Text(
              _fortune.mainTitle,
              style: GoogleFonts.zcoolKuaiLe( // å¿«ä¹ä½“ (éœ€åœ¨ pubspec å¼•å…¥æˆ–æ¢æˆ Rounded)
                fontSize: 36,
                color: widget.skin.primaryAccent,
              ),
            ),
            const SizedBox(height: 12),
            Text(
              _fortune.subTitle,
              textAlign: TextAlign.center,
              style: GoogleFonts.maShanZheng( // æ‰‹å†™ä½“é£æ ¼
                fontSize: 18,
                color: Colors.grey[600],
              ),
            ),
            const SizedBox(height: 30),
            // å¹¸è¿è‰²è‰²å—
            Container(
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
              decoration: BoxDecoration(
                color: _fortune.luckyColor.withOpacity(0.2),
                borderRadius: BorderRadius.circular(50),
              ),
              child: Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  Icon(Icons.palette, size: 14, color: _fortune.luckyColor),
                  const SizedBox(width: 6),
                  Text(
                    "${loc.luckyColor}: ${_fortune.luckyColorName}",
                    style: TextStyle(color: _fortune.luckyColor, fontSize: 12, fontWeight: FontWeight.bold),
                  ),
                ],
              ),
            )
          ],
        ),
      ),
    );
  }

  // ğŸ‘¾ æ ·å¼ C: èµ›åšæ•°æ®å¡ (Cyber)
  Widget _buildCyberDataCard(AppLocalizations loc, bool isYes) {
    final screenWidth = MediaQuery.of(context).size.width;
    final primaryColor = const Color(0xFFCCFF00); // é…¸æ€§ç»¿
    final bgBlack = const Color(0xFF0A0A0A);

    return Container(
      width: screenWidth * 0.85,
      decoration: BoxDecoration(
        color: bgBlack,
        border: Border.all(color: primaryColor, width: 2),
        boxShadow: [
          BoxShadow(color: primaryColor.withOpacity(0.4), blurRadius: 20) // éœ“è™¹å…‰æ™•
        ],
      ),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // Header
          Container(
            padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
            color: primaryColor,
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text("SYSTEM_MSG // ${isYes ? 'ACK' : 'NACK'}", 
                  style: GoogleFonts.vt323(color: bgBlack, fontWeight: FontWeight.bold, fontSize: 16)),
                const Icon(Icons.hub, size: 16, color: Colors.black),
              ],
            ),
          ),
          
          Padding(
            padding: const EdgeInsets.all(24),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  _fortune.mainTitle,
                  style: GoogleFonts.vt323(
                    fontSize: 56,
                    color: Colors.white,
                    height: 0.9,
                  ),
                ).animate().tint(color: primaryColor, duration: 200.ms), // æ•…éšœé—ªçƒ
                
                const SizedBox(height: 16),
                
                Text(
                  ">>> ${_fortune.subTitle}",
                  style: GoogleFonts.shareTechMono(
                    color: primaryColor,
                    fontSize: 14,
                  ),
                ),
                
                const SizedBox(height: 30),
                
                // è£…é¥°æ€§æ•°æ®æµ
                Row(
                  children: [
                    for(int i=0; i<5; i++)
                      Container(
                        margin: const EdgeInsets.only(right: 4),
                        width: 40, height: 4,
                        color: i < _fortune.stars ? primaryColor : Colors.grey[800],
                      )
                  ],
                ),
                const SizedBox(height: 8),
                Text("PROBABILITY: ${(0.7 + math.Random().nextDouble()*0.29).toStringAsFixed(4)}",
                  style: GoogleFonts.vt323(color: Colors.grey[600], fontSize: 14)),
              ],
            ),
          ),
        ],
      ),
    );
  }

  // âœ¨ æ ·å¼ D: å¡”ç½—ç‰Œ (Wish)
  Widget _buildTarotCard(AppLocalizations loc, bool isYes) {
    final screenWidth = MediaQuery.of(context).size.width;
    
    return Container(
      width: screenWidth * 0.7,
      height: screenWidth * 0.7 * 1.6, // é»„é‡‘æ¯”ä¾‹
      padding: const EdgeInsets.all(4),
      decoration: BoxDecoration(
        gradient: const LinearGradient(
          begin: Alignment.topLeft,
          end: Alignment.bottomRight,
          colors: [Color(0xFF2B5876), Color(0xFF4E4376)], // æ·±é‚ƒæ˜Ÿç©º
        ),
        borderRadius: BorderRadius.circular(16),
        border: Border.all(color: const Color(0xFFFCE38A), width: 1), // é‡‘è¾¹
        boxShadow: [BoxShadow(color: const Color(0xFF4E4376).withOpacity(0.5), blurRadius: 30)],
      ),
      child: Container(
        decoration: BoxDecoration(
          border: Border.all(color: const Color(0xFFFCE38A).withOpacity(0.3), width: 1),
          borderRadius: BorderRadius.circular(12),
        ),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const Icon(Icons.auto_awesome, color: Color(0xFFFCE38A), size: 30),
            const SizedBox(height: 20),
            Text(
              _fortune.mainTitle,
              textAlign: TextAlign.center,
              style: GoogleFonts.cinzel( // å¾ˆæœ‰ç¥åœ£æ„Ÿçš„å­—ä½“
                fontSize: 32,
                color: Colors.white,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 16),
            Padding(
              padding: const EdgeInsets.symmetric(horizontal: 20),
              child: Text(
                _fortune.subTitle,
                textAlign: TextAlign.center,
                style: GoogleFonts.notoSerif(
                  fontSize: 14,
                  color: Colors.white70,
                  height: 1.6,
                  fontStyle: FontStyle.italic,
                ),
              ),
            ),
            const SizedBox(height: 30),
            // æ˜Ÿæ˜Ÿæ’åˆ—
            Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: List.generate(5, (index) => Icon(
                index < _fortune.stars ? Icons.star : Icons.star_border,
                color: const Color(0xFFFCE38A),
                size: 14,
              )),
            )
          ],
        ),
      ),
    );
  }

  // --- ğŸ§© é€šç”¨ç»„ä»¶ ---

  Widget _buildVintageStamp(AppLocalizations loc) {
    return Container(
      padding: const EdgeInsets.all(4),
      decoration: BoxDecoration(
        border: Border.all(color: const Color(0xFF8F3B35), width: 1.5),
        borderRadius: BorderRadius.circular(4),
      ),
      child: Text(
        "${loc.today}\nAPPROVED",
        textAlign: TextAlign.center,
        style: GoogleFonts.courierPrime(
          fontSize: 8, 
          color: const Color(0xFF8F3B35), 
          fontWeight: FontWeight.bold
        ),
      ),
    ).animate().rotate(begin: 0, end: -0.1); // ç›–ç« ç¨å¾®æ­ªä¸€ç‚¹
  }

  Widget _buildActionButton({
    required IconData icon,
    required String label,
    required VoidCallback onTap,
    required bool isPrimary,
    required AppSkin skin,
  }) {
    // æŒ‰é’®é¢œè‰²é€‚é…
    final Color btnColor = skin.mode == SkinMode.cyber 
        ? (isPrimary ? const Color(0xFFCCFF00) : Colors.white) 
        : (isPrimary ? Colors.white : Colors.white70);
    
    final Color textColor = skin.mode == SkinMode.cyber && isPrimary 
        ? Colors.black 
        : Colors.white;

    return GestureDetector(
      onTap: onTap,
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          Container(
            width: 56, height: 56,
            decoration: BoxDecoration(
              shape: BoxShape.circle,
              color: isPrimary ? btnColor : Colors.white.withOpacity(0.1),
              border: isPrimary ? null : Border.all(color: Colors.white, width: 1.5),
            ),
            child: Icon(icon, color: textColor, size: 26),
          ),
          const SizedBox(height: 12),
          Text(
            label,
            style: skin.bodyFont.copyWith(
              fontSize: 12,
              fontWeight: FontWeight.w600,
              color: Colors.white.withOpacity(0.9),
              letterSpacing: 1.0,
            ),
          ),
        ],
      ),
    );
  }
}

// è™šçº¿ç»˜åˆ¶å™¨
class _DashedLinePainter extends CustomPainter {
  final Color color;
  _DashedLinePainter({required this.color});

  @override
  void paint(Canvas canvas, Size size) {
    final paint = Paint()..color = color..strokeWidth = 1.5..strokeCap = StrokeCap.round;
    const dashWidth = 5;
    const dashSpace = 5;
    double startX = 0;
    while (startX < size.width) {
      canvas.drawLine(Offset(startX, 0), Offset(startX + dashWidth, 0), paint);
      startX += dashWidth + dashSpace;
    }
  }
  @override
  bool shouldRepaint(covariant CustomPainter oldDelegate) => false;
}

// è¡¥å…¨ç±»å®šä¹‰
class FortuneData {
  final String mainTitle;
  final String subTitle;
  final int stars;
  final Color luckyColor;
  final String luckyColorName;
  FortuneData(this.mainTitle, this.subTitle, this.stars, this.luckyColor, this.luckyColorName);
}

class FortuneGenerator {
  // è§ä¸Šæ–¹ç¬¬äºŒæ­¥çš„ä»£ç å®ç°ï¼Œæ­¤å¤„ä¸å†é‡å¤ï¼Œå®é™…æ–‡ä»¶ä¸­è¯·åˆå¹¶
  static FortuneData generate(BuildContext context, bool isYes, SkinMode mode) {
    // ... Copy implementation from Step 2 ...
    // ä¸ºç¡®ä¿ä»£ç å®Œæ•´æ€§ï¼Œè¯·å°† Step 2 ä¸­çš„ä»£ç å¤åˆ¶åˆ°è¿™é‡Œ
    final loc = AppLocalizations.of(context)!;
    final random = math.Random();
    List<String> titles;
    List<String> subs;
    switch (mode) {
      case SkinMode.vintage:
        titles = isYes ? [loc.vinYes1, loc.vinYes2, loc.vinYes3] : [loc.vinNo1, loc.vinNo2, loc.vinNo3];
        subs = isYes ? [loc.vinYesSub1, loc.vinYesSub2, loc.vinYesSub3] : [loc.vinNoSub1, loc.vinNoSub2, loc.vinNoSub3];
        break;
      case SkinMode.healing:
        titles = isYes ? [loc.heaYes1, loc.heaYes2, loc.heaYes3] : [loc.heaNo1, loc.heaNo2, loc.heaNo3];
        subs = isYes ? [loc.heaYesSub1, loc.heaYesSub2, loc.heaYesSub3] : [loc.heaNoSub1, loc.heaNoSub2, loc.heaNoSub3];
        break;
      case SkinMode.cyber:
        titles = isYes ? [loc.cybYes1, loc.cybYes2, loc.cybYes3] : [loc.cybNo1, loc.cybNo2, loc.cybNo3];
        subs = isYes ? [loc.cybYesSub1, loc.cybYesSub2, loc.cybYesSub3] : [loc.cybNoSub1, loc.cybNoSub2, loc.cybNoSub3];
        break;
      case SkinMode.wish:
        titles = isYes ? [loc.wisYes1, loc.wisYes2, loc.wisYes3] : [loc.wisNo1, loc.wisNo2, loc.wisNo3];
        subs = isYes ? [loc.wisYesSub1, loc.wisYesSub2, loc.wisYesSub3] : [loc.wisNoSub1, loc.wisNoSub2, loc.wisNoSub3];
        break;
    }
    final index = random.nextInt(titles.length);
    final stars = 3 + random.nextInt(3);
    final colors = [
      (const Color(0xFFE57373), "Coral Red"),
      (const Color(0xFF81C784), "Mint Green"),
      (const Color(0xFF64B5F6), "Sky Blue"),
      (const Color(0xFFFFD54F), "Sunshine"),
      (const Color(0xFF9575CD), "Lavender"),
    ];
    final colorData = colors[random.nextInt(colors.length)];
    return FortuneData(titles[index], subs[index], stars, colorData.$1, colorData.$2);
  }
}
```

------

### ğŸš€ æ•ˆæœæ€»ç»“

è¿™å¥—æ–¹æ¡ˆå®æ–½åï¼š

1. **å¤å¤æ¨¡å¼**ï¼šä½ ä¼šå¾—åˆ°ä¸€å¼ æœ‰è´¨æ„Ÿçš„â€œäººç”Ÿè½¦ç¥¨â€ï¼Œä¸Šé¢æœ‰é’¢å°å’Œæ¡å½¢ç ã€‚
2. **æ²»æ„ˆæ¨¡å¼**ï¼šä½ ä¼šå¾—åˆ°ä¸€å¼ å¯çˆ±çš„ä¾¿åˆ©è´´ï¼Œä¸Šé¢æœ‰ Emoji å’Œæ‰‹å†™ä½“çš„å®‰æ…°ã€‚
3. **èµ›åšæ¨¡å¼**ï¼šä½ ä¼šå¾—åˆ°ä¸€å¼ é»‘åº•ç»¿å­—çš„ç³»ç»Ÿé€šçŸ¥å•ï¼Œå……æ»¡äº†æå®¢é£ã€‚
4. **è®¸æ„¿æ¨¡å¼**ï¼šä½ ä¼šå¾—åˆ°ä¸€å¼ ç¥ç§˜çš„å¡”ç½—ç‰Œï¼Œæ˜Ÿå…‰é—ªçƒã€‚