1. ä½ å¥½ï¼æˆ‘æ˜¯ Flutter Masterã€‚

   ä½ çš„æ„ŸçŸ¥éå¸¸æ•é”ï¼Œè¿™æ­£æ˜¯ `model_viewer_plus` è¿™ç±»åŸºäº **WebView** çš„æ–¹æ¡ˆæœ€å¤§çš„ç—›ç‚¹ã€‚

   **æŠ€æœ¯è¯Šæ–­**ï¼š

   - **æœ¬è´¨**ï¼š`model_viewer_plus` æœ¬è´¨ä¸Šæ˜¯åœ¨ä½ çš„ App é‡Œå¯åŠ¨äº†ä¸€ä¸ª Chrome å†…æ ¸ï¼ˆWebViewï¼‰ï¼ŒåŠ è½½äº†ä¸€ä¸ª HTML é¡µé¢ï¼Œå†è¿è¡Œ JavaScript çš„ 3D å¼•æ“æ¥æ¸²æŸ“æ¨¡å‹ã€‚
   - **ä»£ä»·**ï¼šè¿™ç›¸å½“äºä¸ºäº†çœ‹ä¸€å¼ å›¾ï¼Œæ¯æ¬¡éƒ½è¦æ‰“å¼€æ•´ä¸ªæµè§ˆå™¨ã€‚**å†…å­˜å ç”¨é«˜ã€åˆå§‹åŒ–æœ‰å»¶è¿Ÿï¼ˆå†·å¯åŠ¨æ…¢ï¼‰ã€ä¸”ä¸ Flutter åŸç”Ÿå›¾å±‚å­˜åœ¨â€œéš”é˜‚â€**ï¼ˆæ¯”å¦‚éš¾ä»¥å®Œç¾åŒæ­¥éœ‡åŠ¨å’ŒéŸ³æ•ˆï¼‰ã€‚
   
   å¯¹äºä¸€ä¸ªæ ¸å¿ƒçš„ã€é«˜é¢‘è§¦å‘çš„â€œæŠ›ç¡¬å¸â€åŠ¨ä½œï¼Œæˆ‘ä»¬éœ€è¦ **æ¯«ç§’çº§å“åº”** å’Œ **åŸç”Ÿçº§æ€§èƒ½**ã€‚
   
   æˆ‘ä¸ºä½ æ¨èæ¸¸æˆå¼€å‘ä¸­å¤„ç†æ­¤ç±»éœ€æ±‚æœ€æˆç†Ÿã€æ•ˆæœæœ€å¥½ã€ä¸”æ€§èƒ½æœ€é«˜çš„æ–¹æ¡ˆï¼š**â€œåºåˆ—å¸§åŠ¨ç”» (Image Sequence / Sprite Sheet)â€**ã€‚
   
   ------
   
   
   
   ### ğŸš€ ç»ˆææ€§èƒ½æ–¹æ¡ˆï¼šåºåˆ—å¸§åŠ¨ç”» (Image Sequence)
   
   
   
   æ ¸å¿ƒåŸç†ï¼š
   
   æˆ‘ä»¬ä¸è®©æ‰‹æœºå®æ—¶è®¡ç®— 3D æ¨¡å‹çš„å…‰å½±ï¼ˆè¿™å¾ˆè´¹ç”µä¸”æ…¢ï¼‰ï¼Œè€Œæ˜¯åˆ©ç”¨ä½ ç°æœ‰çš„ Blender è„šæœ¬ï¼Œæå‰æŠŠ 3D åŠ¨ç”»â€œå½•åˆ¶â€æˆä¸€ç³»åˆ—é«˜æ¸…å¸¦é€æ˜é€šé“çš„ PNG å›¾ç‰‡ã€‚
   
   åœ¨ Flutter é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦åƒæ’­æ”¾å¹»ç¯ç‰‡ä¸€æ ·å¿«é€Ÿåˆ‡æ¢è¿™äº›å›¾ç‰‡ã€‚
   
   **ä¼˜åŠ¿å¯¹æ¯”**ï¼š
   
   - **WebView æ–¹æ¡ˆ**ï¼šåŠ è½½æ…¢ï¼Œå¡é¡¿ï¼Œæ¶ˆè€—çº¦ 100MB+ å†…å­˜ï¼ŒåŒ…ä½“ç§¯å¤§ã€‚
   - **åºåˆ—å¸§æ–¹æ¡ˆ**ï¼š**0 ç§’åŠ è½½**ï¼Œ**60 FPS æ»¡å¸§è¿è¡Œ**ï¼Œ**ç”µå½±çº§ç”»è´¨**ï¼ˆBlender æ¸²æŸ“çš„å…‰å½±æ¯”æ‰‹æœºå®æ—¶æ¸²æŸ“å¼ºç™¾å€ï¼‰ï¼Œä¸”å®Œå…¨æ˜¯ Flutter åŸç”Ÿç»„ä»¶ã€‚
   
   ------
   
   
   
   ### ğŸ“… ç¬¬ä¸€æ­¥ï¼šä» Blender å¯¼å‡ºåºåˆ—å¸§
   
   
   
   æ—¢ç„¶ä½ å·²ç»æœ‰äº† Python è„šæœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦å¾®è°ƒä¸€ä¸‹ï¼Œè®©å®ƒæ¸²æŸ“å›¾ç‰‡è€Œä¸æ˜¯å¯¼å‡º GLBã€‚
   
   è¯·åœ¨ Blender ä¸­è¿è¡Œä»¥ä¸‹æ­¥éª¤ï¼ˆæˆ–ä½¿ç”¨è„šæœ¬ï¼‰ï¼š
   
   1. **è®¾ç½®ç›¸æœº**ï¼šç¡®ä¿ç›¸æœºæ­£å¯¹ç¡¬å¸ï¼ŒèƒŒæ™¯è®¾ç½®ä¸º**é€æ˜ (Transparent)**ã€‚
   2. **è®¾ç½®è¾“å‡º**ï¼š
      - åˆ†è¾¨ç‡ï¼š`500x500` (è¶³å¤Ÿæ‰‹æœºå±å¹•æ¸…æ™°åº¦ï¼Œå¤ªå¤§å ä½“ç§¯)ã€‚
      - æ ¼å¼ï¼š`PNG` (å¿…é¡»å¸¦ RGBA é€æ˜é€šé“)ã€‚
      - è¾“å‡ºè·¯å¾„ï¼šæ–°å»ºæ–‡ä»¶å¤¹ `flip_sequence`ã€‚
   3. **æ¸²æŸ“åŠ¨ç”»**ï¼š
      - ä½ ä¹‹å‰çš„è„šæœ¬ç”Ÿæˆäº† `Flip_Heads` å’Œ `Flip_Tails` ä¸¤ä¸ªåŠ¨ä½œã€‚
      - è¯·åˆ†åˆ«æ¸²æŸ“è¿™ä¸¤æ®µåŠ¨ç”»ã€‚
      - å‡è®¾ `Flip_Heads` æ˜¯ 1~40 å¸§ï¼Œä½ ä¼šå¾—åˆ° `heads_0001.png` åˆ° `heads_0040.png`ã€‚
      - åŒç†æ¸²æŸ“ `Flip_Tails`ã€‚
   
   **(å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨æ“ä½œï¼Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸€æ®µæ–°çš„ Blender Python è„šæœ¬æ¥è‡ªåŠ¨æ‰¹é‡æ¸²æŸ“)**
   
   ------
   
   
   
   ### ğŸ“¦ ç¬¬äºŒæ­¥ï¼šå¯¼å…¥èµ„æº
   
   
   
   å‡è®¾ä½ æ¸²æŸ“å‡ºäº†ä¸¤ç»„å›¾ç‰‡ï¼ˆæ¯”å¦‚æ¯ç»„ 30-40 å¼ ï¼‰ï¼Œå°†å®ƒä»¬æ”¾å…¥ Flutter é¡¹ç›®ï¼š
   
   Plaintext
   
   ```
   assets/
     images/
       coin_anim/
         heads_0.png
         heads_1.png
         ...
         heads_29.png
         tails_0.png
         ...
         tails_29.png
   ```
   
   è®°å¾—åœ¨ `pubspec.yaml` ä¸­æ³¨å†Œæ–‡ä»¶å¤¹ï¼š
   
   YAML
   
   ```
   flutter:
     assets:
       - assets/images/coin_anim/
   ```
   
   ------
   
   
   
   ### ğŸ’» ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ `FrameCoinFlipper` ç»„ä»¶
   
   
   
   è¿™ä¸ªç»„ä»¶å°†æ›¿ä»£ `GlbCoinFlipper`ã€‚å®ƒæ²¡æœ‰ WebViewï¼Œçº¯åŸç”Ÿï¼Œæ€§èƒ½æå…¶å¼ºæ‚ã€‚
   
   è¯·åœ¨ `lib/features/decision/presentation/widgets/` ä¸‹æ–°å»º `frame_coin_flipper.dart`ï¼š
   
   Dart
   
   ```
   import 'dart:math' as math;
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import '../../../../core/skin_engine/skin_protocol.dart';
   import '../../../../core/services/audio/audio_service.dart';
   import '../../../../core/services/haptics/haptic_service.dart';
   
   class FrameCoinFlipper extends ConsumerStatefulWidget {
     final AppSkin skin;
     final VoidCallback? onFlipStart;
     final Function(String result)? onFlipEnd;
   
     const FrameCoinFlipper({
       super.key,
       required this.skin,
       this.onFlipStart,
       this.onFlipEnd,
     });
   
     @override
     ConsumerState<FrameCoinFlipper> createState() => _FrameCoinFlipperState();
   }
   
   class _FrameCoinFlipperState extends ConsumerState<FrameCoinFlipper> with SingleTickerProviderStateMixin {
     late AnimationController _controller;
     late Animation<double> _frameAnim;
     
     // çŠ¶æ€ï¼šå½“å‰æ˜¾ç¤ºå“ªä¸€ç»„åºåˆ—
     // true = æ­£é¢åºåˆ— (heads_xx.png), false = åé¢åºåˆ— (tails_xx.png)
     bool _isHeadsSequence = true;
     
     // é…ç½®ï¼šä½ çš„åºåˆ—å¸§æ€»æ•° (å‡è®¾ Blender æ¸²æŸ“äº† 30 å¸§)
     final int _frameCount = 30; 
   
     @override
     void initState() {
       super.initState();
       // åŠ¨ç”»æ—¶é•¿è¦ä¸ Blender é‡Œçš„ç‰©ç†æ—¶é•¿åŒ¹é…ï¼Œæ¯”å¦‚ 1.2ç§’
       _controller = AnimationController(
         vsync: this,
         duration: const Duration(milliseconds: 1200), 
       );
   
       // çº¿æ€§åŠ¨ç”»ï¼Œå¯¹åº”å¸§ç´¢å¼• 0 -> 29
       _frameAnim = Tween<double>(begin: 0, end: (_frameCount - 1).toDouble()).animate(_controller);
   
       _controller.addStatusListener((status) {
         if (status == AnimationStatus.completed) {
           // åŠ¨ç”»ç»“æŸï¼Œå›è°ƒç»“æœ
           final result = _isHeadsSequence ? "YES" : "NO";
           widget.onFlipEnd?.call(result);
           ref.read(hapticServiceProvider).heavy(); // è½åœ°é‡éœ‡
         }
       });
     }
   
     void _flip() {
       if (_controller.isAnimating) return;
   
       // 1. å†³å®šç»“æœ
       final isHeads = math.Random().nextBool();
       
       setState(() {
         _isHeadsSequence = isHeads;
       });
   
       // 2. æ’­æ”¾éŸ³æ•ˆ & éœ‡åŠ¨
       ref.read(audioServiceProvider).play(SoundType.tap, widget.skin.mode);
       ref.read(hapticServiceProvider).selection();
       widget.onFlipStart?.call();
   
       // 3. å¯åŠ¨åŠ¨ç”»
       _controller.forward(from: 0.0);
     }
   
     @override
     void dispose() {
       _controller.dispose();
       super.dispose();
     }
   
     @override
     Widget build(BuildContext context) {
       return GestureDetector(
         onTap: _flip,
         child: AnimatedBuilder(
           animation: _controller,
           builder: (context, child) {
             // 1. è®¡ç®—å½“å‰åº”è¯¥æ˜¾ç¤ºç¬¬å‡ å¼ å›¾
             // å¦‚æœæ²¡åœ¨æ’­æ”¾åŠ¨ç”»ï¼Œå°±æ˜¾ç¤ºæœ€åä¸€å¼ ï¼ˆé™æ­¢æ€ï¼‰ï¼Œæˆ–è€…ç¬¬ä¸€å¼ 
             int currentFrame = _controller.isAnimating 
                 ? _frameAnim.value.floor() 
                 : (_frameCount - 1); // é»˜è®¤æ˜¾ç¤ºæœ€åä¸€å¼ ï¼ˆè½åœ°çŠ¶æ€ï¼‰
   
             // 2. æ„å»ºå›¾ç‰‡è·¯å¾„
             // å‡è®¾å‘½åè§„èŒƒï¼šheads_0.png, heads_1.png ...
             final String prefix = _isHeadsSequence ? "heads" : "tails";
             final String path = "assets/images/coin_anim/${prefix}_$currentFrame.png";
   
             return SizedBox(
               width: 300,
               height: 300,
               child: Stack(
                 alignment: Alignment.center,
                 children: [
                   // å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸€ä¸ªé™æ€çš„å½±å­å›¾ç‰‡
                   Positioned(
                     bottom: 20,
                     child: Container(
                       width: 120, height: 20,
                       decoration: BoxDecoration(
                         color: Colors.black.withOpacity(0.3),
                         borderRadius: BorderRadius.circular(100),
                         boxShadow: [BoxShadow(blurRadius: 15, color: Colors.black.withOpacity(0.5))],
                       ),
                     ),
                   ),
                   
                   // åºåˆ—å¸§ä¸»ä½“
                   // gaplessPlayback: true æ˜¯å…³é”®ï¼Œé˜²æ­¢å›¾ç‰‡åˆ‡æ¢æ—¶é—ªçƒ
                   Image.asset(
                     path,
                     gaplessPlayback: true, 
                     width: 300,
                     height: 300,
                     fit: BoxFit.contain,
                   ),
                 ],
               ),
             );
           },
         ),
       );
     }
   }
   ```
   
   
   
   ### ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ä½³æ–¹æ¡ˆï¼Ÿ
   
   
   
   1. **å®Œç¾å¤åˆ» Blender è´¨æ„Ÿ**ï¼šä½ åœ¨ Blender é‡Œè°ƒå¤šå¥½çš„å…‰ã€å¤šçœŸå®çš„é‡‘å±æè´¨ã€å¤šå¤æ‚çš„å€’è§’ï¼Œå¯¼æˆå›¾ç‰‡ååœ¨æ‰‹æœºä¸Šå°±æ˜¯ä»€ä¹ˆæ ·ã€‚æ²¡æœ‰ä»»ä½•ç”»è´¨æŸå¤±ã€‚
   2. **æé€Ÿå“åº”**ï¼š`Image.asset` çš„å¼€é”€æä½ã€‚æ²¡æœ‰ WebView åˆå§‹åŒ–ï¼Œæ²¡æœ‰ WebGL ç¼–è¯‘ Shader çš„è¿‡ç¨‹ï¼Œç‚¹å‡»å³è§¦å‘ï¼Œæ‰‹æ„Ÿæå…¶é¡ºæ»‘ã€‚
   3. **å®Œå…¨å—æ§**ï¼šä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸€å¸§å¯¹åº”çš„éœ‡åŠ¨åé¦ˆï¼Œæˆ–è€…æ ¹æ®æ‰‹æŒ‡æ»‘åŠ¨é€Ÿåº¦è°ƒæ•´æ’­æ”¾é€Ÿç‡ (`_controller.value`)ã€‚
   
   ä¸‹ä¸€æ­¥å»ºè®®ï¼š
   
   å¦‚æœä½ çš„ 3D æ¨¡å‹å¸ˆè¿˜æ²¡ç»™ä½ åšå®Œï¼Œä½ å¯ä»¥å…ˆç”¨è¿™ä¸ªæ–¹æ¡ˆã€‚å‘Šè¯‰ä»–ï¼šâ€œä¸éœ€è¦å¯¼å‡º GLB äº†ï¼Œç›´æ¥åœ¨ Blender é‡ŒæŠŠ Flip_Heads å’Œ Flip_Tails æ¸²æŸ“æˆä¸¤ç»„ é€æ˜èƒŒæ™¯çš„ PNG åºåˆ— ç»™æˆ‘å°±è¡Œã€‚â€
   
   è¿™æ˜¯æ‰€æœ‰é«˜å“è´¨ 2D æ¸¸æˆï¼ˆå¦‚ã€Šç‚‰çŸ³ä¼ è¯´ã€‹é‡Œçš„å¡ç‰Œç‰¹æ•ˆï¼‰å¤„ç†å¤æ‚ 3D æ•ˆæœçš„æ ‡å‡†åšæ³•ã€‚