1. å¥½çš„ï¼Œä½œä¸º Flutter Masterï¼Œæˆ‘å·²ä»”ç»†å®¡æŸ¥äº†ä½ çš„é¡¹ç›®ä»£ç å’Œè®¾è®¡éœ€æ±‚ã€‚è¿™ä¸‰ä¸ªä¿®æ”¹å°†æå¤§åœ°æå‡ Vintage ä¸»é¢˜çš„æ²‰æµ¸æ„Ÿï¼Œä½¿å…¶ä»ä¸€ä¸ªâ€œåº”ç”¨ç•Œé¢â€è½¬å˜ä¸ºä¸€ä¸ªç²¾è‡´çš„â€œæ•°å­—ç‰©ä»¶â€ã€‚

   ä»¥ä¸‹æ˜¯é’ˆå¯¹ `flip_moment` é¡¹ç›®çš„å…·ä½“ä»£ç ä¿®æ”¹æ–¹æ¡ˆã€‚

   

   ### 1. ğŸ¯ `DeskDecoration`ï¼šè§†è§‰ä¸­å¿ƒçŸ«æ­£

   

   æˆ‘ä»¬éœ€è¦åœ¨ `DeskDecoration` ä¸­å¼•å…¥å‚ç›´åç§»é‡ï¼Œä»¥æŠµæ¶ˆé¡¶éƒ¨å¯¼èˆªæ å’Œåº•éƒ¨æ–‡å­—å¸¦æ¥çš„è§†è§‰é‡å¿ƒä¸‹ç§»ã€‚

   **ä¿®æ”¹æ–‡ä»¶ï¼š** `lib/features/decision/presentation/widgets/desk_decoration.dart`

   Dart

   ```
   import 'package:flutter/material.dart';
   import '../../../../core/skin_engine/skin_protocol.dart';
   
   class DeskDecoration extends StatelessWidget {
     final AppSkin skin;
   
     const DeskDecoration({super.key, required this.skin});
   
     @override
     Widget build(BuildContext context) {
       return CustomPaint(
         size: Size.infinite,
         painter: _DeskPainter(
           lineColor: skin.textPrimary.withOpacity(0.05),
           matColor: Colors.black.withOpacity(0.25),
           accentColor: skin.primaryAccent.withOpacity(0.4),
           // âœ¨ [ä¿®æ”¹] æ‰‹åŠ¨å‘ä¸‹åç§» 50.0 (æ ¹æ®å®é™…é¢„è§ˆæ•ˆæœå¾®è°ƒ)
           verticalOffset: 50.0, 
         ),
       );
     }
   }
   
   class _DeskPainter extends CustomPainter {
     final Color lineColor;
     final Color matColor;
     final Color accentColor;
     final double verticalOffset; // âœ¨ [æ–°å¢] å±æ€§
   
     _DeskPainter({
       required this.lineColor,
       required this.matColor,
       required this.accentColor,
       required this.verticalOffset, // âœ¨ [æ–°å¢] æ„é€ å‡½æ•°å‚æ•°
     });
   
     @override
     void paint(Canvas canvas, Size size) {
       // âœ¨ [ä¿®æ”¹] æ ¸å¿ƒè®¡ç®—ï¼šåŸºäºåç§»é‡é‡æ–°å®šä½ä¸­å¿ƒç‚¹
       final center = size.center(Offset(0, verticalOffset));
   
       // --- 1. è®¡ç®—æ ¸å¿ƒåŒºåŸŸ (æ¡Œå«) ---
       final matSize = size.width * 0.75;
       final matRect = Rect.fromCenter(
         center: center,
         width: matSize,
         height: matSize,
       );
   
       // ... (ä»¥ä¸‹ç»˜åˆ¶é€»è¾‘ä¿æŒä¸å˜ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¾èµ–äº matRectï¼Œè€Œ matRect ç°åœ¨å·²ç»åç§»äº†)
       
       // --- 2. ç»˜åˆ¶æ·±è‰²æ¡Œå«èƒŒæ™¯ ---
       final matPaint = Paint()
         ..color = matColor
         ..style = PaintingStyle.fill;
   
       canvas.drawRRect(
         RRect.fromRectAndRadius(matRect, const Radius.circular(24)),
         matPaint,
       );
   
       // ... (åç»­ç»˜åˆ¶ä»£ç çœç•¥ï¼Œä¿æŒåŸæ ·å³å¯) ...
       
       // [è¡¥å……] ç¡®ä¿åˆ»åº¦å°ºçš„ç»˜åˆ¶é€»è¾‘ä¹Ÿè·Ÿéš matRect ç§»åŠ¨äº†
       // ä½ çš„åŸä»£ç ä¸­åˆ»åº¦å°ºæ˜¯åŸºäº matRect.top å’Œ matRect.bottom è®¡ç®—çš„ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨é€‚é…ï¼Œæ— éœ€ä¿®æ”¹ã€‚
       // åªéœ€è¦è¡¥å…¨å‰©ä½™çš„ Corner Accents å’Œ Lines ç»˜åˆ¶é€»è¾‘å³å¯ã€‚
       
       // --- 3. ç»˜åˆ¶"èšç„¦å–æ™¯æ¡†" (Corner Accents) ---
       final framePadding = 20.0; 
       final frameRect = matRect.inflate(framePadding);
       final cornerLen = 25.0; 
   
       final accentPaint = Paint()
         ..color = accentColor
         ..strokeWidth = 2.0
         ..style = PaintingStyle.stroke
         ..strokeCap = StrokeCap.square;
   
       // å·¦ä¸Š
       canvas.drawLine(frameRect.topLeft, frameRect.topLeft + Offset(cornerLen, 0), accentPaint);
       canvas.drawLine(frameRect.topLeft, frameRect.topLeft + Offset(0, cornerLen), accentPaint);
       // å³ä¸Š
       canvas.drawLine(frameRect.topRight, frameRect.topRight - Offset(cornerLen, 0), accentPaint);
       canvas.drawLine(frameRect.topRight, frameRect.topRight + Offset(0, cornerLen), accentPaint);
       // å·¦ä¸‹
       canvas.drawLine(frameRect.bottomLeft, frameRect.bottomLeft + Offset(cornerLen, 0), accentPaint);
       canvas.drawLine(frameRect.bottomLeft, frameRect.bottomLeft - Offset(0, cornerLen), accentPaint);
       // å³ä¸‹
       canvas.drawLine(frameRect.bottomRight, frameRect.bottomRight - Offset(cornerLen, 0), accentPaint);
       canvas.drawLine(frameRect.bottomRight, frameRect.bottomRight - Offset(0, cornerLen), accentPaint);
   
       // --- 4. è¾…åŠ©è¿æ¥çº¿ ---
       final linePaint = Paint()
         ..color = lineColor
         ..strokeWidth = 1.0;
   
       canvas.drawLine(Offset(center.dx, frameRect.top), Offset(center.dx, frameRect.top - 30), linePaint);
       canvas.drawLine(Offset(center.dx, frameRect.bottom), Offset(center.dx, frameRect.bottom + 30), linePaint);
       canvas.drawLine(Offset(frameRect.left, center.dy), Offset(0, center.dy), linePaint); 
       canvas.drawLine(Offset(frameRect.right, center.dy), Offset(size.width, center.dy), linePaint);
   
       // --- 5. å·¦ä¾§åˆ»åº¦å°º ---
       final rulerX = 16.0;
       final startY = matRect.top;
       final endY = matRect.bottom;
   
       for (double y = startY; y <= endY; y += 15) {
         final isMajor = ((y - startY) % 60 == 0);
         final len = isMajor ? 12.0 : 6.0;
         linePaint.strokeWidth = isMajor ? 1.5 : 0.5;
         canvas.drawLine(Offset(rulerX, y), Offset(rulerX + len, y), linePaint);
       }
     }
   
     @override
     bool shouldRepaint(covariant _DeskPainter oldDelegate) => false;
   }
   ```

   

   ### 2. ğŸª™ `CoinFlipper`ï¼šæ‹Ÿç‰©åŒ–ç¡¬å¸é‡æ„

   

   è¿™ä¸€æ­¥å°†ç”¨çœŸå®çš„å›¾ç‰‡ç´ ææ›¿æ¢åŸæœ¬çš„ CSS ç»˜å›¾ã€‚è¯·ç¡®ä¿ä½ å·²å°† `vintage_coin_heads.png` å’Œ `vintage_coin_tails.png` æ”¾å…¥ `assets/images/` ç›®å½•ï¼Œå¹¶åœ¨ `pubspec.yaml` ä¸­å£°æ˜ã€‚

   **ä¿®æ”¹æ–‡ä»¶ï¼š** `lib/features/decision/presentation/widgets/coin_flipper.dart`

   Dart

   ```
   // åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ  Matrix4 éœ€è¦çš„å¼•ç”¨ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
   // import 'dart:math' as math;
   
   // ... _CoinFlipperState ç±»ä¸­çš„ä»£ç  ...
   
     // [æ›¿æ¢] æ•´ä¸ª _buildCoinVisual æ–¹æ³•
     Widget _buildCoinVisual(bool isFront) {
       // âš ï¸ ç¡®ä¿ assets ç›®å½•å’Œ pubspec.yaml å·²é…ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶
       final String imagePath = isFront 
           ? 'assets/images/vintage_coin_heads.png' 
           : 'assets/images/vintage_coin_tails.png';
   
       return Container(
         width: 200, // ä¿æŒä¸ä¹‹å‰ä¸€è‡´çš„å°ºå¯¸
         height: 200,
         decoration: BoxDecoration(
           shape: BoxShape.circle,
           // ç§»é™¤åŸæœ‰çš„ gradient å’Œ borderï¼Œåªä¿ç•™é˜´å½±å¢åŠ åšåº¦æ„Ÿ
           boxShadow: [
             BoxShadow(
               color: Colors.black.withOpacity(0.5),
               offset: const Offset(0, 4), // å‚ç›´æŠ•å½±æ¨¡æ‹Ÿåšåº¦
               blurRadius: 4,
             )
           ],
         ),
         child: Transform(
           alignment: Alignment.center,
           // ğŸ§  æ ¸å¿ƒç‰©ç†é€»è¾‘ä¿®æ­£ï¼š
           // å½“æ˜¾ç¤ºåé¢(isFront=false)æ—¶ï¼Œå®é™…ä¸Šå¤–å±‚å®¹å™¨å·²ç»ç¿»è½¬äº†180åº¦(èƒŒé¢å¯¹ç€å±å¹•)ã€‚
           // å¦‚æœç›´æ¥æ¸²æŸ“åé¢å›¾ç‰‡ï¼Œå›¾ç‰‡ä¼šæ˜¯å·¦å³é•œåƒä¸”å€’ç½®çš„ã€‚
           // æ‰€ä»¥æˆ‘ä»¬éœ€è¦å†æ¬¡æ—‹è½¬ï¼š
           // rotateX(pi): ä¸Šä¸‹ç¿»è½¬ï¼Œä¿®æ­£å€’ç½®
           // rotateZ(pi): é…åˆXè½´ç¿»è½¬ï¼Œä¿®æ­£å·¦å³é•œåƒï¼Œä½¿å…¶è‡ªç„¶æ˜¾ç¤º
           transform: isFront 
               ? Matrix4.identity() 
               : (Matrix4.identity()..rotateX(math.pi)..rotateZ(math.pi)),
           child: Image.asset(
             imagePath,
             fit: BoxFit.contain,
             // å¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºä¸€ä¸ª fallbackï¼Œé¿å…çº¢å±
             errorBuilder: (context, error, stackTrace) => Container(
               color: widget.skin.primaryAccent,
               child: Center(child: Text(isFront ? "H" : "T")),
             ),
           ),
         ),
       );
     }
   ```

   

   ### 3. ğŸï¸ `ResultCard`ï¼šæ‹ç«‹å¾—é£æ ¼é‡è®¾è®¡

   

   æˆ‘ä»¬å°†åŸæ¥çš„é€šç”¨å¡ç‰‡æ”¹é€ ä¸ºæ‹ç«‹å¾—æ ·å¼ã€‚è¿™é‡Œä½¿ç”¨äº† `GoogleFonts.cedarvilleCursive`ï¼Œå®ƒæ˜¯ `Wish` ä¸»é¢˜ä¸­å·²å¼•å…¥çš„å­—ä½“ï¼Œéå¸¸é€‚åˆæ‰‹å†™ç­¾åã€‚

   **ä¿®æ”¹æ–‡ä»¶ï¼š** `lib/features/decision/presentation/widgets/result_card.dart`

   Dart

   ```
   // ... imports ...
   // ç¡®ä¿å¼•å…¥äº† google_fonts
   import 'package:google_fonts/google_fonts.dart'; 
   
   // ... _ResultCardState ç±» ...
   
     @override
     Widget build(BuildContext context) {
       final screenWidth = MediaQuery.of(context).size.width;
       // æ‹ç«‹å¾—é€šå¸¸æ¯”è¾ƒçª„é•¿ï¼Œè°ƒæ•´å®½åº¦æ¯”ä¾‹
       final cardWidth = screenWidth * 0.80; 
   
       // åˆ¤æ–­æ˜¯å¦ä¸º Vintage æ¨¡å¼ï¼Œå¦‚æœæ˜¯åˆ™åº”ç”¨ç‰¹æ®Šæ ·å¼ï¼Œå¦åˆ™ä¿ç•™åŸæœ‰é€»è¾‘ï¼ˆä¿æŒå…¼å®¹æ€§ï¼‰
       // æˆ–è€…ç›´æ¥ä¿®æ”¹æ‰€æœ‰æ¨¡å¼ï¼Œè¿™é‡Œæ¼”ç¤ºç›´æ¥ä¿®æ”¹ä¸ºæ‹ç«‹å¾—é£æ ¼ï¼ˆæ›´å…·ç‰¹è‰²ï¼‰
       
       return AnimatedBuilder(
         animation: _controller,
         builder: (context, child) {
           return Transform.scale(
             scale: _scaleAnim.value,
             child: Transform.rotate(
               angle: _rotateAnim.value,
               child: Opacity(
                 opacity: _opacityAnim.value,
                 child: child,
               ),
             ),
           );
         },
         child: GestureDetector(
           onTap: widget.onClose,
           child: Container(
             width: cardWidth,
             // æ‹ç«‹å¾—ç»å…¸å¸ƒå±€ï¼šåº•éƒ¨ç•™ç™½æå¤§
             padding: const EdgeInsets.fromLTRB(16, 16, 16, 48), 
             decoration: BoxDecoration(
               color: const Color(0xFFF6F2E9), // ğŸï¸ ç±³ç™½è‰²ç›¸çº¸è´¨æ„Ÿ
               borderRadius: BorderRadius.circular(2), // æ‹ç«‹å¾—å‡ ä¹æ˜¯ç›´è§’
               boxShadow: [
                 BoxShadow(
                   color: Colors.black.withOpacity(0.4),
                   blurRadius: 20,
                   spreadRadius: 2,
                   offset: const Offset(5, 10), // æ‚¬æµ®æ„ŸæŠ•å½±
                 )
               ],
             ),
             child: Column(
               mainAxisSize: MainAxisSize.min,
               children: [
                 // 1. é»‘è‰²æ˜¾å½±åŒºåŸŸ (AspectRatio 1:1)
                 AspectRatio(
                   aspectRatio: 1.0,
                   child: Container(
                     decoration: BoxDecoration(
                       color: const Color(0xFF181818), // æ·±é»‘åº•è‰²
                       // æ¨¡æ‹Ÿé•œå¤´æš—è§’ (Vignette)
                       gradient: RadialGradient(
                         colors: [const Color(0xFF2A2A2A), const Color(0xFF080808)],
                         radius: 0.85,
                       ),
                     ),
                     child: Center(
                       // ç»“æœæ–‡å­—ï¼šå‘å…‰å°ç« æ•ˆæœ
                       child: Text(
                         widget.result.toUpperCase(),
                         style: GoogleFonts.playfairDisplay( // å¤å¤è¡¬çº¿ä½“
                           fontSize: 72,
                           color: const Color(0xFFFF3B30).withOpacity(0.9), // çƒ§ç¼çº¢
                           fontWeight: FontWeight.w900,
                           letterSpacing: 4,
                           shadows: [
                             // éœ“è™¹/æ˜¾å½±æ¶²è¾‰å…‰
                             BoxShadow(color: Colors.red.withOpacity(0.6), blurRadius: 30, spreadRadius: 5)
                           ]
                         ),
                       ),
                     ),
                   ),
                 ),
                 
                 const SizedBox(height: 24),
   
                 // 2. åº•éƒ¨æ‰‹å†™å¤‡æ³¨åŒºåŸŸ
                 Row(
                   mainAxisAlignment: MainAxisAlignment.spaceBetween,
                   crossAxisAlignment: CrossAxisAlignment.end,
                   children: [
                     // å·¦ä¾§ï¼šæ‰‹å†™ç­¾å
                     Text(
                       "The Decision", 
                       style: GoogleFonts.cedarvilleCursive(
                         fontSize: 24, 
                         fontWeight: FontWeight.w600,
                         color: const Color(0xFF2C3333) // å¢¨æ°´è‰²
                       )
                     ),
                     // å³ä¾§ï¼šæ‰“å­—æœºæ—¥æœŸ
                     Text(
                       "NOV 26, '25", 
                       style: GoogleFonts.courierPrime(
                         fontSize: 12, 
                         color: Colors.grey[600],
                         fontWeight: FontWeight.bold,
                         letterSpacing: 1.0
                       )
                     ),
                   ],
                 ),
               ],
             ),
           ),
         ),
       );
     }
   ```

   

   ### ğŸ“ å®æ–½æ¸…å• (Checklist)

   

   1. **èµ„æºå‡†å¤‡**: å¿…é¡»æ·»åŠ  `vintage_coin_heads.png` å’Œ `vintage_coin_tails.png` åˆ°é¡¹ç›®ä¸­ã€‚
   2. **ä¾èµ–æ£€æŸ¥**: ç¡®è®¤ `pubspec.yaml` ä¸­åŒ…å« `google_fonts: ^6.x.x`ã€‚
   3. **çƒ­é‡è½½**: ä¿®æ”¹å®Œ `desk_decoration.dart` åï¼Œå¦‚æœæ˜¯çƒ­é‡è½½æ²¡ååº”ï¼Œå°è¯•çƒ­é‡å¯ (Hot Restart) ä»¥ä¾¿ CustomPainter é‡æ–°è®¡ç®—å°ºå¯¸ã€‚

   è¿™å¥—æ–¹æ¡ˆä¸ä»…è§£å†³äº†å¯¹é½é—®é¢˜ï¼Œè¿˜é€šè¿‡æè´¨å’Œæ’ç‰ˆçš„å‡çº§ï¼Œå½»åº•è´¯å½»äº†â€œå¤å¤â€çš„è®¾è®¡è¯­è¨€ã€‚