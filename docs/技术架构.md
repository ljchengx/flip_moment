### ğŸ›ï¸ 1. æ¶æ„æ€»è§ˆ (System Overview)

æˆ‘ä»¬å°†é‡‡ç”¨ **Feature-First + Layered Architecture**ã€‚æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼š**Data (æ•°æ®å±‚)**ã€**Domain (é¢†åŸŸå±‚)**ã€**Presentation (è¡¨ç°å±‚)**ã€‚

æ ¸å¿ƒå·®å¼‚åœ¨äºå¼•å…¥äº†ä¸€ä¸ªç‰¹æ®Šçš„ **"Skin Engine" (çš®è‚¤å¼•æ“)**ï¼Œå®ƒæ¨ªè·¨è¡¨ç°å±‚ä¸åŸºç¡€è®¾æ–½å±‚ï¼Œè´Ÿè´£åŠ¨æ€æ³¨å…¥èµ„æºä¸é€»è¾‘ã€‚

ä»£ç æ®µ

```
graph TD
    User[ç”¨æˆ·äº¤äº’] --> UI[Presentation Layer]
    UI --> Skin[Skin Engine (Factory)]
    UI --> Logic[State Management (Riverpod)]
    
    Logic --> Domain[Domain Layer (Entities)]
    Logic --> Repo[Repository Interface]
    
    Repo --> Data[Data Layer (Implementation)]
    Data --> LocalDB[(Hive / Isar)]
    Data --> Assets[Asset Bundle]
    
    Skin --> Vintage[Vintage Implementation]
    Skin --> Healing[Healing Implementation]
```

---

### ğŸ“‚ 2. ç›®å½•ç»“æ„è§„èŒƒ (Directory Structure)

ä¸è¦æŠŠæ‰€æœ‰æ–‡ä»¶éƒ½ä¸¢åœ¨ `lib` ä¸‹ã€‚è¿™æ˜¯æˆ‘æ¨èçš„ç”Ÿäº§çº§ç›®å½•ç»“æ„ï¼š

Plaintext

```
lib/
â”œâ”€â”€ bootstrap.dart          // Appå¯åŠ¨å‰çš„åˆå§‹åŒ– (Crashlytics, Hive init, etc.)
â”œâ”€â”€ main.dart               // å…¥å£
â”œâ”€â”€ core/                   // æ ¸å¿ƒé€šç”¨æ¨¡å—
â”‚   â”œâ”€â”€ theme/              // åŸºç¡€ThemeData (ä»…ç”¨äºMaterialè„šæ‰‹æ¶)
â”‚   â”œâ”€â”€ skin_engine/        // ã€æ ¸å¿ƒã€‘çš®è‚¤æŠ½è±¡å·¥å‚ä¸æ¥å£
â”‚   â”œâ”€â”€ utils/              // å·¥å…·ç±» (Logger, Formatters)
â”‚   â””â”€â”€ constants/          // å…¨å±€å¸¸é‡ (API Keys, Route Names)
â”œâ”€â”€ features/               // æŒ‰åŠŸèƒ½åˆ’åˆ†
â”‚   â”œâ”€â”€ decision/           // æ ¸å¿ƒåŠŸèƒ½ï¼šåšå†³å®š
â”‚   â”‚   â”œâ”€â”€ data/           // æ•°æ®æº (Repositories)
â”‚   â”‚   â”œâ”€â”€ domain/         // å®ä½“ (CoinEntity, MochiEntity)
â”‚   â”‚   â”œâ”€â”€ presentation/   // UI
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/ // Riverpod Notifiers
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/     // å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ screens/     // é¡µé¢
â”‚   â”œâ”€â”€ history/            // å†å²è®°å½•åŠŸèƒ½
â”‚   â””â”€â”€ settings/           // è®¾ç½®ä¸æ¢è‚¤
â””â”€â”€ services/               // ç¬¬ä¸‰æ–¹æœåŠ¡å°è£…
    â”œâ”€â”€ audio/              // éŸ³é¢‘æœåŠ¡æ¥å£
    â”œâ”€â”€ haptics/            // éœ‡åŠ¨åé¦ˆæ¥å£
    â””â”€â”€ storage/            // æ•°æ®åº“æ¥å£
```

---

### ğŸ§¬ 3. æ ¸å¿ƒå­ç³»ç»Ÿè®¾è®¡ (Core Subsystems)

#### A. çš®è‚¤å¼•æ“ (The Skin Engine) - æŠ½è±¡å·¥å‚æ¨¡å¼

è¿™æ˜¯æœ¬æ¶æ„çš„çµé­‚ã€‚æˆ‘ä»¬é€šè¿‡ **Riverpod** å°†å½“å‰çš„çš®è‚¤æ³¨å…¥åˆ° Widget Tree ä¸­ã€‚

Dart

```
// lib/core/skin_engine/skin_interface.dart

/// çš®è‚¤æ¥å£ï¼šå®šä¹‰äº†æ‰€æœ‰è§†è§‰ã€å¬è§‰ã€ç‰©ç†è¡Œä¸ºçš„åè®®
abstract class AppSkin {
  // åŸºç¡€å…ƒæ•°æ®
  String get id;
  String get name;
  
  // è§†è§‰ç³»ç»Ÿ
  Color get backgroundColor;
  Color get primaryColor;
  TextStyle get displayTextStyle;
  
  // æ¸²æŸ“å·¥å‚æ–¹æ³• (é‡ç‚¹ï¼è®©çš®è‚¤å†³å®šæ¸²æŸ“ä»€ä¹ˆ Widget)
  Widget buildHeroWidget(AnimationController controller); 
  Widget buildBackground(BuildContext context);
  
  // è¡Œä¸ºç³»ç»Ÿ
  PhysicsSimulation get physicsSimulation; // å¼¹ç°§ vs æœºæ¢°
  String get soundPackage; // å¯¹åº”çš„éŸ³æ•ˆåŒ…è·¯å¾„
}

// åœ¨ Riverpod ä¸­ç®¡ç†
final currentSkinProvider = StateNotifierProvider<SkinNotifier, AppSkin>((ref) {
  return SkinNotifier();
});
```

**è®¾è®¡æ„å›¾ï¼š** UI å±‚æ ¹æœ¬ä¸éœ€è¦çŸ¥é“ç°åœ¨æ˜¯â€œç¡¬å¸â€è¿˜æ˜¯â€œå›¢å­â€ã€‚å®ƒåªéœ€è¦è°ƒç”¨ `skin.buildHeroWidget()`ã€‚å¦‚æœæ˜¯ Vintage æ¨¡å¼ï¼Œå·¥å‚è¿”å› 3D ç¡¬å¸ï¼›å¦‚æœæ˜¯ Healing æ¨¡å¼ï¼Œå·¥å‚è¿”å› Rive å›¢å­ã€‚

#### B. æ•°æ®æŒä¹…å±‚ (Data Layer) - NoSQL ç­–ç•¥

ç”±äºæˆ‘ä»¬éœ€è¦å­˜å‚¨ç»“æ„ä¸è§„åˆ™çš„å†å²è®°å½•ï¼ˆæœ‰æ—¶åŒ…å«å›¾ç‰‡ï¼Œæœ‰æ—¶åŒ…å«æ–‡å­—ï¼‰ï¼Œä¸”å¯¹æ€§èƒ½è¦æ±‚æé«˜ï¼ˆç¬é—´å†™å…¥ï¼‰ï¼Œæ¨èä½¿ç”¨ **Isar Database** (Hive çš„ç»§æ‰¿è€…ï¼Œæ€§èƒ½æ›´å¼ºï¼Œæ”¯æŒå…¨æ–‡æœ¬æœç´¢)ã€‚

Dart

```
// lib/features/history/data/decision_record.dart
@collection
class DecisionRecord {
  Id id = Isar.autoIncrement;

  @Index()
  late DateTime timestamp;

  late String result; // "YES" or "NO"
  late String themeId; // "vintage" or "healing"
  
  // æ‰©å±•å­—æ®µ
  String? note;       // ç”¨æˆ·å¤‡æ³¨
  String? moodEmoji;  // å¿ƒæƒ…
}
```

#### C. æœåŠ¡å±‚ (Service Layer) - æ¥å£éš”ç¦»

ä¸è¦ç›´æ¥åœ¨ UI é‡Œè°ƒ `AudioPlayer`ã€‚æˆ‘ä»¬éœ€è¦å°è£…ã€‚

Dart

```
// lib/services/audio/audio_service.dart
abstract class IAudioService {
  Future<void> loadSoundBank(String bankPath); // æ¢è‚¤æ—¶é¢„åŠ è½½éŸ³æ•ˆ
  void playTapSound();
  void playResultSound(bool isPositive);
}

// å®ç°å±‚å¯ä»¥éšæ—¶æ›¿æ¢åº•å±‚åº“ (audioplayers -> just_audio)
class AudioServiceImpl implements IAudioService { ... }
```

---

### âš™ï¸ 4. å…³é”®æµç¨‹æ¶æ„ (Critical Flows)

#### æ¢è‚¤æµç¨‹ (Skin Switching Flow)

è¿™æ˜¯ä¸€ä¸ªæå…¶æ¶ˆè€—èµ„æºçš„æ“ä½œï¼Œå¿…é¡»ä¼˜é›…å¤„ç†ï¼š

1. **ç”¨æˆ·è§¦å‘ï¼š** ç‚¹å‡»åˆ‡æ¢ä¸»é¢˜ã€‚
    
2. **SkinNotifierï¼š** çŠ¶æ€å˜æ›´ä¸º `Loading`ã€‚
    
3. **AssetLoaderï¼š**
    
    - å¸è½½å½“å‰ä¸»é¢˜çš„å†…å­˜èµ„æºï¼ˆImageCache.clear, Shader disposeï¼‰ã€‚
        
    - é¢„åŠ è½½æ–°ä¸»é¢˜çš„èµ„æºï¼ˆRive æ–‡ä»¶, 3D æ¨¡å‹, éŸ³æ•ˆ Bankï¼‰ã€‚
        
4. **UI å“åº”ï¼š** å±•ç¤ºä¸€ä¸ªè¿‡æ¸¡é®ç½©ï¼ˆä¾‹å¦‚ï¼šç›¸æœºå¿«é—¨é—­åˆï¼Œæˆ–äº‘é›¾é®æŒ¡ï¼‰ã€‚
    
5. **SkinNotifierï¼š** çŠ¶æ€å˜æ›´ä¸º `NewSkin`ã€‚
    
6. **UI å“åº”ï¼š** é®ç½©æ‰“å¼€ï¼Œæ–°ä¸–ç•Œå‘ˆç°ã€‚
    

#### å†³ç­–ä¸ç»“æœæµç¨‹ (Decision Flow)

1. **UIï¼š** ç”¨æˆ·äº¤äº’ -> `GestureDetector`ã€‚
    
2. **Controllerï¼š** `DecisionController.startDecision()`ã€‚
    
3. **Logicï¼š** è®¡ç®—ç»“æœ (Random)ï¼Œè®°å½• Entityã€‚
    
4. **UIï¼š** æ’­æ”¾åŠ¨ç”» (é€šè¿‡ `skin.animationDuration` æ§åˆ¶)ã€‚
    
5. **Serviceï¼š** æ’­æ”¾éŸ³æ•ˆ + è§¦å‘éœ‡åŠ¨ã€‚
    
6. **Repositoryï¼š** åŠ¨ç”»ç»“æŸåï¼Œå¼‚æ­¥å†™å…¥ `Isar` æ•°æ®åº“ã€‚
    

---

### ğŸ›¡ï¸ 5. æŠ€æœ¯æ ˆæ¸…å• (Tech Stack Recommendation)

ä½œä¸ºé«˜çº§å·¥ç¨‹å¸ˆï¼Œè¿™æ˜¯æˆ‘ä¸ºä½ é€‰å®šçš„æœ€ä½³å®è·µç»„åˆï¼š

| **æ¨¡å—**                   | **æ¨èåº“/å·¥å…·**                | **ç†ç”±**                                    |
| ------------------------ | ------------------------- | ----------------------------------------- |
| **State Management**     | **Flutter Riverpod**      | ç¼–è¯‘æ—¶å®‰å…¨ï¼Œæ—  Context ä¾èµ–ï¼Œå®Œç¾çš„ DI æ”¯æŒã€‚             |
| **Database**             | **Isar**                  | çº¯ Dart ç¼–å†™ï¼Œæå¿«ï¼Œæ”¯æŒ ACID äº‹åŠ¡ï¼ŒType-safeã€‚        |
| **Navigation**           | **GoRouter**              | å£°æ˜å¼è·¯ç”±ï¼Œæ–¹ä¾¿å¤„ç† DeepLink å’Œå¤æ‚çš„é¡µé¢è·³è½¬åŠ¨ç”»ã€‚           |
| **Animation**            | **Rive (Runtime)**        | æ²»æ„ˆç³»æ¨¡å¼æ ¸å¿ƒï¼Œæ€§èƒ½ä¼˜äº Lottieã€‚                      |
| **3D Rendering**         | **flutter_3d_controller** | å¤å¤æ¨¡å¼æ ¸å¿ƒï¼ŒåŸºäº glTFã€‚                           |
| **Physics**              | **flutter_physics**       | æ¨¡æ‹ŸçœŸå®çš„å¼¹ç°§å’Œé˜»å°¼è¿åŠ¨ã€‚                             |
| **Dependency Injection** | **Riverpod (è‡ªå¸¦)**         | ä¸éœ€è¦ GetItï¼ŒRiverpod æœ¬èº«å°±æ˜¯æœ€å¥½çš„å®šä½å™¨ã€‚            |
| **Code Generation**      | **Freezed**               | ç”¨äºç”Ÿæˆä¸å¯å˜çš„ Data Class å’Œ Union Typesï¼Œå‡å°‘æ¨¡ç‰ˆä»£ç ã€‚ |


### 1. ğŸ“¦ ç”Ÿäº§çº§ä¾èµ–æ¸…å• (The `pubspec.yaml`)

è¿™æ˜¯æ”¯æ’‘â€œåŒæ¨¡æ€â€ä¸â€œé«˜æ€§èƒ½â€æ‰€éœ€çš„æœ€å°å®Œå¤‡é›†ã€‚è¯·ç›´æ¥è¦†ç›–ä½ é¡¹ç›®æ ¹ç›®å½•çš„ `pubspec.yaml` ä¾èµ–éƒ¨åˆ†ã€‚

YAML

```
environment:
  sdk: '>=3.2.0 <4.0.0' # ç¡®ä¿ä½¿ç”¨æ”¯æŒ Dart 3 çš„æ–°ç‰¹æ€§ (Records, Patterns)

dependencies:
  flutter:
    sdk: flutter

  # --- ğŸ§  æ ¸å¿ƒæ¶æ„ (Core Architecture) ---
  flutter_riverpod: ^2.5.1      # çŠ¶æ€ç®¡ç† (ä¸äºŒä¹‹é€‰)
  riverpod_annotation: ^2.3.5   # ä»£ç ç”Ÿæˆæ³¨è§£ (å‡å°‘æ ·æ¿ä»£ç )
  freezed_annotation: ^2.4.1    #ä¸å¯å˜æ•°æ®æ¨¡å‹ (Data Class)
  go_router: ^13.2.0            # å£°æ˜å¼è·¯ç”±

  # --- ğŸ’¾ æ•°æ®æŒä¹…åŒ– (Data Layer) ---
  isar: ^3.1.0                  # é«˜æ€§èƒ½ NoSQL æ•°æ®åº“
  isar_flutter: ^3.1.0          # Isar çš„ Flutter ç»‘å®š
  path_provider: ^2.1.2         # è·å–å­˜å‚¨è·¯å¾„

  # --- ğŸ¨ è§†è§‰æ¸²æŸ“å¼•æ“ (Rendering Engine) ---
  rive: ^0.13.4                 # æ²»æ„ˆæ¨¡å¼æ ¸å¿ƒï¼šçŸ¢é‡åŠ¨ç”»è¿è¡Œæ—¶
  model_viewer_plus: ^1.7.0     # å¤å¤æ¨¡å¼æ ¸å¿ƒï¼š3Dæ¨¡å‹æ¸²æŸ“ (å…¼å®¹æ€§å¥½)
  # æˆ–è€…ç”¨ flutter_3d_controller å¦‚æœéœ€è¦æ›´åº•å±‚çš„æ§åˆ¶
  
  flutter_animate: ^4.5.0       # å£°æ˜å¼åŠ¨ç”»åº“ (ç”¨äºå¾®äº¤äº’)
  google_fonts: ^6.2.1          # åŠ¨æ€åŠ è½½å­—ä½“ (Playfair, Varela Round)

  # --- ğŸ® ç¡¬ä»¶äº¤äº’ (Hardware Interaction) ---
  sensors_plus: ^5.0.1          # é™€èºä»ª/åŠ é€Ÿåº¦è®¡
  vibration: ^1.9.0             # é«˜çº§éœ‡åŠ¨åé¦ˆ (æ”¯æŒ Pattern)
  audioplayers: ^6.0.0          # éŸ³æ•ˆæ’­æ”¾

dev_dependencies:
  flutter_test:
    sdk: flutter
  
  # --- ğŸ›  ä»£ç ç”Ÿæˆå·¥å…·é“¾ (Codegen) ---
  build_runner: ^2.4.9
  riverpod_generator: ^2.4.0
  freezed: ^2.4.7
  isar_generator: ^3.1.0
  flutter_lints: ^4.0.0         # ä¸¥æ ¼çš„ Lint è§„åˆ™
```

---

### 2. ğŸ—ï¸ ç›®å½•ç»“æ„è‡ªåŠ¨åŒ–è„šæœ¬ (Scaffold Script)

ä¸è¦æ‰‹åŠ¨å³é”®æ–°å»ºæ–‡ä»¶å¤¹ï¼Œé‚£æ˜¯åˆçº§å·¥ç¨‹å¸ˆçš„åšæ³•ã€‚åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œæ­¤è„šæœ¬ï¼ˆMac/Linux/Git Bashï¼‰ï¼Œç¬é—´å»ºç«‹èµ·éµå¾ª **Feature-First** çš„ç›®å½•ç»“æ„ã€‚

Bash

```
#!/bin/bash

# åˆ›å»ºæ ¸å¿ƒç›®å½•æ ‘
mkdir -p lib/core/{constants,theme,utils,exceptions,skin_engine}
mkdir -p lib/features/decision/{data,domain,presentation/{controllers,widgets,screens}}
mkdir -p lib/features/history/{data,domain,presentation}
mkdir -p lib/features/settings/{data,domain,presentation}
mkdir -p lib/services/{audio,haptics,storage}

# åˆ›å»ºå ä½æ–‡ä»¶ (ä¿æŒ Git ç»“æ„)
touch lib/core/constants/app_constants.dart
touch lib/core/theme/app_palette.dart
touch lib/core/skin_engine/skin_protocol.dart
touch lib/core/skin_engine/skin_provider.dart

# åˆ›å»ºç‰¹å®šåŠŸèƒ½æ–‡ä»¶
touch lib/features/decision/domain/coin_entity.dart
touch lib/features/decision/presentation/decision_screen.dart

# åˆ›å»ºæœåŠ¡æ¥å£
touch lib/services/audio/audio_service_interface.dart

echo "âœ… Clean Architecture Structure Created Successfully!"
```

_(Windows ç”¨æˆ·å¦‚æœæ— æ³•è¿è¡Œ .shï¼Œè¯·æŒ‰ä¸Šè¿° `mkdir` è·¯å¾„æ‰‹åŠ¨åˆ›å»ºï¼Œä¿æŒç»“æ„ä¸€è‡´æ€§è‡³å…³é‡è¦ã€‚)_

---

### 3. ğŸ§¬ æ ¸å¿ƒå¼•æ“ä»£ç å®ç° (Skin Engine Core)

ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæœ€å…³é”®çš„**â€œæ¢è‚¤å¼•æ“â€**å†™å‡ºæ¥ã€‚è¿™æ˜¯æ•´ä¸ª App çš„ä¸­æ¢ç¥ç»ã€‚

è¯·åœ¨ `lib/core/skin_engine/skin_protocol.dart` ä¸­å†™å…¥ï¼š

Dart

```
import 'package:flutter/material.dart';

// å®šä¹‰åŒæ¨¡æ€æšä¸¾
enum SkinMode { vintage, healing }

/// [AppSkin] æŠ½è±¡åŸºç±»
/// è¿™æ˜¯æ‰€æœ‰ UI ç»„ä»¶å”¯ä¸€ä¾èµ–çš„å¯¹è±¡ã€‚
abstract class AppSkin {
  // åŸºç¡€æ ‡è¯†
  SkinMode get mode;
  
  // --- ğŸ¨ è¯­ä¹‰åŒ–é¢œè‰² (Semantic Colors) ---
  Color get backgroundSurface;  // èƒŒæ™¯
  Color get primaryAccent;      // ä¸»å¼ºè°ƒè‰² (é‡‘/ç»¿)
  Color get secondaryAccent;    // æ¬¡å¼ºè°ƒè‰² (çº¢/ç²‰)
  Color get textPrimary;        // æ­£æ–‡
  
  // --- âœ’ï¸ è¯­ä¹‰åŒ–å­—ä½“ (Semantic Typography) ---
  TextStyle get displayFont;    // å¤§æ ‡é¢˜
  TextStyle get bodyFont;       // æ­£æ–‡
  TextStyle get monoFont;       // æ•°å­—/æ—¥æœŸ

  // --- ğŸ§© åŠ¨æ€èµ„æº (Dynamic Assets) ---
  /// æ ¸å¿ƒäº’åŠ¨ç»„ä»¶æ„å»ºå™¨
  /// ä¼ å…¥ [controller] ä»¥ä¾¿å¤–éƒ¨æ§åˆ¶åŠ¨ç”»è¿›åº¦
  Widget buildInteractiveHero({
    required AnimationController controller,
    required VoidCallback onTap,
  });

  // --- âš¡ ç‰©ç†å‚æ•° (Physics) ---
  Curve get animationCurve;
  Duration get animationDuration;
}
```

æ¥ç€ï¼Œåœ¨ `lib/core/skin_engine/skins/vintage_skin.dart` (éœ€æ–°å»º) ä¸­å®ç°å¤å¤çš®è‚¤ï¼š

Dart

```
import 'package:flutter/material.dart';
import 'package:google_fonts/google_fonts.dart';
import '../skin_protocol.dart';

class VintageSkin implements AppSkin {
  @override
  SkinMode get mode => SkinMode.vintage;

  @override
  Color get backgroundSurface => const Color(0xFF1A1C1E);
  @override
  Color get primaryAccent => const Color(0xFFC6A664);
  @override
  Color get secondaryAccent => const Color(0xFF8F3B35);
  @override
  Color get textPrimary => const Color(0xFFF2EFE5);

  @override
  TextStyle get displayFont => GoogleFonts.playfairDisplay(
    fontSize: 32, fontWeight: FontWeight.bold, color: textPrimary);
    
  @override
  TextStyle get bodyFont => GoogleFonts.lato(color: textPrimary);
  
  @override
  TextStyle get monoFont => GoogleFonts.courierPrime(color: primaryAccent);

  @override
  Curve get animationCurve => Curves.easeInOutCubic; // æœºæ¢°æ„Ÿ

  @override
  Duration get animationDuration => const Duration(milliseconds: 1200);

  @override
  Widget buildInteractiveHero({
    required AnimationController controller,
    required VoidCallback onTap,
  }) {
    // TODO: è¿™é‡Œä¹‹åä¼šè¿æ¥å…·ä½“çš„ CoinFlipper ç»„ä»¶
    return Container(
      width: 200, height: 200,
      color: Colors.transparent,
      child: Center(child: Text("ğŸª™", style: TextStyle(fontSize: 80))),
    );
  }
}
```

æœ€åï¼Œåœ¨ `lib/core/skin_engine/skin_provider.dart` ä¸­ä½¿ç”¨ Riverpod è¿›è¡Œç®¡ç†ï¼š

Dart

```
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'skin_protocol.dart';
import 'skins/vintage_skin.dart';
import 'skins/healing_skin.dart'; // å‡è®¾ä½ ç¨ååˆ›å»º

part 'skin_provider.g.dart'; // ç­‰å¾… build_runner ç”Ÿæˆä»£ç 

@Riverpod(keepAlive: true)
class CurrentSkin extends _$CurrentSkin {
  @override
  AppSkin build() {
    // é»˜è®¤å¯åŠ¨ä¸ºå¤å¤æ¨¡å¼ï¼Œå®é™…é¡¹ç›®ä¸­å¯è¯»å–æœ¬åœ°å­˜å‚¨
    return VintageSkin();
  }

  void toggleSkin() {
    if (state.mode == SkinMode.vintage) {
      // state = HealingSkin(); // åˆ‡æ¢é€»è¾‘
    } else {
      state = VintageSkin();
    }
  }
}
```